<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<title>Sessão 9: Clouds privadas com o OpenStack</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock pre.nowrap,.literalblock pre.nowrap pre,.listingblock pre.nowrap,.listingblock pre.nowrap pre{white-space:pre;word-wrap:normal}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #dddddf}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="_sessão_9_clouds_privadas_com_o_openstack">Sessão 9: Clouds privadas com o OpenStack</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_1_instalação_do_ubuntu_server">1) Instalação do Ubuntu Server</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Crie uma mídia bootável com o instalador do Ubuntu Server, conforme instruções providas pelo instrutor. Em seguida, insira a mídia na máquina destacada como hypervisor para a dupla e execute o <em>boot</em> via USB. Você verá a tela a seguir:</p>
<div id="img-openstack1" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack1.png" alt="openstack1">
</div>
<div class="title">Figure 1. Instalação do Ubuntu Server, parte 1</div>
</div>
<div class="paragraph">
<p>Escolha a linguagem de instalação como inglês (<em>English</em>) e prossiga.</p>
</div>
</li>
<li>
<p>Escolha o <em>layout</em> do teclado e variante como <em>Portuguese (Brazil)</em>.</p>
<div id="img-openstack2" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack2.png" alt="openstack2">
</div>
<div class="title">Figure 2. Instalação do Ubuntu Server, parte 2</div>
</div>
</li>
<li>
<p>Selecione a versão tradicional, <em>Install Ubuntu</em>.</p>
<div id="img-openstack3" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack3.png" alt="openstack3">
</div>
<div class="title">Figure 3. Instalação do Ubuntu Server, parte 3</div>
</div>
</li>
<li>
<p>Para a configuração de rede, mantenha o IP automático obtido via DHCP e prossiga.</p>
<div id="img-openstack4" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack4.png" alt="openstack4">
</div>
<div class="title">Figure 4. Instalação do Ubuntu Server, parte 4</div>
</div>
<div class="paragraph">
<p>Mantenha a configuração de proxy vazia.</p>
</div>
<div id="img-openstack5" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack5.png" alt="openstack5">
</div>
<div class="title">Figure 5. Instalação do Ubuntu Server, parte 5</div>
</div>
<div class="paragraph">
<p>Não é necessário alterar o <em>mirror</em> padrão de instalação de pacotes de Ubuntu.</p>
</div>
<div id="img-openstack6" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack6.png" alt="openstack6">
</div>
<div class="title">Figure 6. Instalação do Ubuntu Server, parte 6</div>
</div>
</li>
<li>
<p>Na configuração de disco, selecione <em>Use An Entire Disk And Set Up LVM</em>.</p>
<div id="img-openstack7" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack7.png" alt="openstack7">
</div>
<div class="title">Figure 7. Instalação do Ubuntu Server, parte 7</div>
</div>
<div class="paragraph">
<p>Selecione o único disco disponível para instalação.</p>
</div>
<div id="img-openstack8" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack8.png" alt="openstack8">
</div>
<div class="title">Figure 8. Instalação do Ubuntu Server, parte 8</div>
</div>
<div class="paragraph">
<p>Teremos que alterar o tamanho padrão da partição raiz (<code>/</code>). Mova o cursor para o volume <code>ubuntu-lv</code> e pressione <code>ENTER</code>.</p>
</div>
<div id="img-openstack9" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack9.png" alt="openstack9">
</div>
<div class="title">Figure 9. Instalação do Ubuntu Server, parte 9</div>
</div>
<div class="paragraph">
<p>Na nova tela, edite o tamanho da partição para 50 GB e selecione <em>Save</em>.</p>
</div>
<div id="img-openstack10" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack10.png" alt="openstack10">
</div>
<div class="title">Figure 10. Instalação do Ubuntu Server, parte 10</div>
</div>
<div class="paragraph">
<p>Revise as configurações de disco, e selecione <em>Done</em>.
.Instalação do Ubuntu Server, parte 11</p>
</div>
<div id="img-openstack11" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack11.png" alt="openstack11">
</div>
</div>
<div class="paragraph">
<p>O sistema irá solicitar confirmação para formatar o disco. Selecione <em>Continue</em>.</p>
</div>
<div id="img-openstack12" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack12.png" alt="openstack12">
</div>
<div class="title">Figure 11. Instalação do Ubuntu Server, parte 12</div>
</div>
</li>
<li>
<p>Agora, defina um usuário não-privilegiado (<code>aluno</code>), hostname da máquina (sugestão: <code>ostk-dX-gX</code>) e senha para o usuário.</p>
<div id="img-openstack13" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack13.png" alt="openstack13">
</div>
<div class="title">Figure 12. Instalação do Ubuntu Server, parte 13</div>
</div>
</li>
<li>
<p>Faremos a instalação de pacotes adicionais manualmente depois, então não é necessário instalar nenhum <em>snap</em>. Selecione <em>Done</em>.</p>
<div id="img-openstack14" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack14.png" alt="openstack14">
</div>
<div class="title">Figure 13. Instalação do Ubuntu Server, parte 14</div>
</div>
</li>
<li>
<p>Acompanhe o progresso de instalação do sistema.</p>
<div id="img-openstack15" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack15.png" alt="openstack15">
</div>
<div class="title">Figure 14. Instalação do Ubuntu Server, progresso</div>
</div>
<div class="paragraph">
<p>Uma vez concluído, selecione <em>Reboot Now</em>. Retire a mídia de instalação e reinicie a máquina para <em>bootar</em> no sistema.</p>
</div>
<div id="img-openstack16" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack16.png" alt="openstack16">
</div>
<div class="title">Figure 15. Instalação do Ubuntu Server, concluída</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_2_instalação_do_openstack">2) Instalação do OpenStack</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Para instalar o OpenStack, acesse o servidor via SSH usando o PuTTY ou Cygwin. Logue como o usuário <code>aluno</code>, fornecendo a senha configurada durante o processo de instalação.</p>
<div class="literalblock">
<div class="content">
<pre>adr-010@DESKTOP-3GP5RKE ~
$ ssh aluno@200.130.46.89
The authenticity of host '200.130.46.89 (200.130.46.89)' can't be established.
ECDSA key fingerprint is SHA256:8cHD89hWRgYFBm4zsTzBwRGMPYWKNPPZz7gn5tShuTs.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added '200.130.46.89' (ECDSA) to the list of known hosts.
aluno@200.130.46.89's password:
Welcome to Ubuntu 18.04.1 LTS (GNU/Linux 4.15.0-42-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Thu Dec  6 13:22:34 UTC 2018

  System load:  0.68              Processes:           143
  Usage of /:   47.1% of 3.87GB   Users logged in:     1
  Memory usage: 1%                IP address for eno1: 200.130.46.89
  Swap usage:   0%


127 packages can be updated.
51 updates are security updates.


Last login: Thu Dec  6 13:22:09 2018
To run a command as administrator (user "root"), use "sudo &lt;command&gt;".
See "man sudo_root" for details.

aluno@ostk-d1-g1:~$</pre>
</div>
</div>
</li>
<li>
<p>Vamos atualizar a máquina, antes de mais nada. Use o comando <code>sudo -i</code> para virar o usuário <code>root</code>:</p>
<div class="literalblock">
<div class="content">
<pre>aluno@ostk-d1-g1:~$ sudo -i
[sudo] password for aluno:
root@ostk-d1-g1:~#</pre>
</div>
</div>
<div class="paragraph">
<p>Agora, atualize via <code>apt-get</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>root@ostk-d1-g1:~# apt-get update ; apt-get -y dist-upgrade</pre>
</div>
</div>
<div class="paragraph">
<p>Findo o processo de atualização, reinicie a máquina se houverem sido realizadas atualizações ao kernel do sistema.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>root@ostk-d1-g1:~# reboot</pre>
</div>
</div>
</li>
<li>
<p>Vamos usar um usuário dedicado para instalar o OpenStack. Crie-o:</p>
<div class="literalblock">
<div class="content">
<pre>root@ostk-d1-g1:~# useradd -s /bin/bash -d /opt/stack -m stack</pre>
</div>
</div>
<div class="paragraph">
<p>Dê permissões de execução de comandos privilegiados para o usuário <code>stack</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>root@ostk-d1-g1:~# echo "stack ALL=(ALL) NOPASSWD: ALL" | sudo tee /etc/sudoers.d/stack</pre>
</div>
</div>
<div class="paragraph">
<p>Finalmente, use o comando <code>su</code> para alternar para esse usuário:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>root@ostk-d1-g1:~# su - stack</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>stack@ostk-d1-g1:~$ whoami
stack</pre>
</div>
</div>
</li>
<li>
<p>Vamos usar o <em>script</em> de instalação facilitada do OpenStack, denominado DevStack. Para isso, clone seu repositório usando o comando <code>git</code>, e em seguida entre na pasta:</p>
<div class="literalblock">
<div class="content">
<pre>stack@ostk-d1-g1:~$ git clone https://git.openstack.org/openstack-dev/devstack ; cd devstack</pre>
</div>
</div>
<div class="paragraph">
<p>Configure uma senha de acesso padrão às interfaces e bases de dados do OpenStack usando um arquivo <code>local.conf</code>. O comando abaixo irá populá-lo automaticamente:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>stack@ostk-d1-g1:~$ cat &lt;&lt;EOF &gt; local.conf
[[local|localrc]]
ADMIN_PASSWORD=Virt3sr
DATABASE_PASSWORD=$ADMIN_PASSWORD
RABBIT_PASSWORD=$ADMIN_PASSWORD
SERVICE_PASSWORD=$ADMIN_PASSWORD
EOF</pre>
</div>
</div>
</li>
<li>
<p>O DevStack irá instalar uma série de pacotes durante sua execução, muitos dos quais se encontram na seção <code>multiverse</code> dos repositórios do Ubuntu. Adicione esse seção à base do <code>apt</code>:</p>
<div class="literalblock">
<div class="content">
<pre>stack@ostk-d1-g1:~$ sudo add-apt-repository universe</pre>
</div>
</div>
</li>
<li>
<p>Tudo pronto! Execute o <em>script</em> <code>stack.sh</code> para instalar o OpenStack:</p>
<div class="literalblock">
<div class="content">
<pre>stack@ostk-d1-g1:~$ ./stack.sh

(...)

This is your host IP address: 200.130.46.21
This is your host IPv6 address: 2001:12f0:b05::279
Horizon is now available at http://200.130.46.21/dashboard
Keystone is serving at http://200.130.46.21/identity/
The default users are: admin and demo
The password: Virt3sr

WARNING:
Using lib/neutron-legacy is deprecated, and it will be removed in the future


Services are running under systemd unit files.
For more information see:
https://docs.openstack.org/devstack/latest/systemd.html

DevStack Version: stein
Change: 7cc83a01caa70786bf6de6f272c1187da37be3a3 Merge "Setup branch in setup-devstack-source-dirs" 2018-12-07 00:35:19 +0000
OS Version: Ubuntu 18.04 bionic

2018-12-07 11:53:15.849 | stack.sh completed in 3249 seconds.</pre>
</div>
</div>
<div class="paragraph">
<p>O processo de instalação é <strong>bastante</strong> demorado, então seja paciente. No exemplo acima, note que o tempo total de execução foi de cerca de 55 minutos.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_3_criação_de_vms_no_openstack">3) Criação de VMs no OpenStack</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Observe, na saída do último comando da atividade anterior, a linha <code>Horizon is now available at (&#8230;&#8203;)</code>&#8201;&#8212;&#8201;anote a URL figurando nesta linha.</p>
<div class="paragraph">
<p>Abra um navegador web em sua máquina física e acesse a URL: você deverá ver a tela de login do OpenStack, como mostrado abaixo. Entre com o usuário <code>admin</code> e senha configurada durante a instalação, provavelmente <code>Virt3sr</code>.</p>
</div>
<div id="img-openstack18" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack18.png" alt="openstack18">
</div>
<div class="title">Figure 16. Login no OpenStack</div>
</div>
<div class="paragraph">
<p>Você verá o <em>dashboard</em> de configuração do OpenStack. Navegue pelas abas e janelas para ambientar-se com a ferramenta.</p>
</div>
<div id="img-openstack19" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack19.png" alt="openstack19">
</div>
<div class="title">Figure 17. Dashboard do OpenStack</div>
</div>
</li>
<li>
<p>Vamos criar uma máquina virtual no OpenStack. Embora seja possível utilizar imagens ISO e realizar o processo de instalação, como fizemos com os demais hypervisors, o método recomendado no OpenStack é que usemos imagens de VM pré-prontas e configuradas para operar nesse ambiente&#8201;&#8212;&#8201;claro, é possível também criar imagens customizadas de acordo com a necessidade específica de sua organização.</p>
<div class="paragraph">
<p>A página <a href="https://docs.openstack.org/image-guide/obtain-images.html" class="bare">https://docs.openstack.org/image-guide/obtain-images.html</a> lista maneiras de obter imagens de máquinas virtuais de diferentes sistemas e distribuições populares.</p>
</div>
<div class="paragraph">
<p>Siga as orientações do instrutor para fazer o download da imagem de VM da distribuição Debian Linux. Em seguida, acesse <em>Projeto</em> &gt; <em>Computação</em> &gt; <em>Imagens</em> &gt; <em>Criar Imagem</em>.</p>
</div>
<div id="img-openstack21" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack21.png" alt="openstack21">
</div>
<div class="title">Figure 18. Criação de imagem de VM, parte 1</div>
</div>
<div class="paragraph">
<p>Defina um nome para a imagem, e navegue em seu computador até o local onde se encontra a imagem <code>qcow2</code> do Debian. Mantenha o formato <em>QCOW2 - Emulador QEMU</em>, e clique em <em>Criar Imagem</em>.</p>
</div>
<div id="img-openstack22" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack22.png" alt="openstack22">
</div>
<div class="title">Figure 19. Criação de imagem de VM, parte 2</div>
</div>
<div class="paragraph">
<p>Após um curto tempo de upload, a imagem será criada, como mostrado abaixo.</p>
</div>
<div id="img-openstack23" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack23.png" alt="openstack23">
</div>
<div class="title">Figure 20. Criação de imagem de VM, concluído</div>
</div>
</li>
<li>
<p>Vamos agora criar uma instância de execução dessa imagem: acesse <em>Projeto</em> &gt; <em>Computação</em> &gt; <em>Instâncias</em> &gt; <em>Disparar Instância</em>.</p>
<div id="img-openstack24" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack24.png" alt="openstack24">
</div>
<div class="title">Figure 21. Criando instâncias, parte 1</div>
</div>
<div class="paragraph">
<p>Em <em>Detalhes</em>, defina o nome da instância (no exemplo, usamos <code>debian9-ostk-dX-gX</code>).</p>
</div>
<div id="img-openstack25" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack25.png" alt="openstack25">
</div>
<div class="title">Figure 22. Criando instâncias, parte 2</div>
</div>
<div class="paragraph">
<p>Em <em>Origem</em>, clique na seta para cima para selecionar a imagem do Debian que foi adicionada ao OpenStack no passo anterior.</p>
</div>
<div id="img-openstack26" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack26.png" alt="openstack26">
</div>
<div class="title">Figure 23. Criando instâncias, parte 3</div>
</div>
<div class="paragraph">
<p>Em <em>Flavor</em>, vamos escolher o "sabor" (efetivamente, a alocação de recursos) da nova instância. Clique na seta para cima para selecionar o <em>flavor</em> <code>ds512M</code>, como ilustrado abaixo.</p>
</div>
<div id="img-openstack27" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack27.png" alt="openstack27">
</div>
<div class="title">Figure 24. Criando instâncias, parte 4</div>
</div>
<div class="paragraph">
<p>Agora, iremos configurar o acesso SSH à instância que será criada. <strong>Recomenda-se</strong> o uso do Cygwin neste passo, já que a configuração do cliente SSH é significativamente mais fácil. Em sua máquina física, acesse o Cygwin com sua conta de usuário local e crie um par de chaves assimétricas com o comando <code>ssh-keygen</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>adr-010@DESKTOP-3GP5RKE ~
$ ssh-keygen -t rsa
Generating public/private rsa key pair.
Enter file in which to save the key (/home/adr-010/.ssh/id_rsa):
Created directory '/home/adr-010/.ssh'.
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /home/adr-010/.ssh/id_rsa.
Your public key has been saved in /home/adr-010/.ssh/id_rsa.pub.
The key fingerprint is:
SHA256:mDhg20jSFPHwwq6FzGy4WPyCXRcsMdWWRIPy6tOM7o4 adr-010@DESKTOP-3GP5RKE
The key's randomart image is:
+---[RSA 2048]----+
|  =oo..=+.       |
| + +.+. +.       |
|. B +oo.         |
|=B * o.+         |
|o=B =.+ S        |
|oB o.o           |
|= o..+           |
|   o+ o          |
|  E++.           |
+----[SHA256]-----+</pre>
</div>
</div>
<div class="paragraph">
<p>Imprima na tela a chave pública do par recém-gerado, com o comando a seguir:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>adr-010@DESKTOP-3GP5RKE ~
$ cat ~/.ssh/id_rsa.pub
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDPxvsqAO0fvRMOpwtOui+fdVxCJWcVHRzuMP5he9Xp7zGCZaWQhMlAgXbq4hOWKU9zKHcKviRPEPTIwb3uyV50GiQqiX3dYsUNkfMlFyuSPGhbDDgQjS0vMES+eOZ/mekqGL8UAhDJric3rcOMQutMuk0KVLM5lQndOoVIVRMCyOOcraVU8zmV1IyGLPWdPKlFdY12qGw6wJcY0YmzQDLP/8RzK8cZ/s5zYYhd6xl9sFwgG5iovoxVmeereALzZhcMcZXUj/pUPyTBLVRwBxd/wER7r5t7B78yqokLDpXSPxe+cuofezX1OwMeJGUZe6DDO5g2cy9uOshk9Z3YKhAN adr-010@DESKTOP-3GP5RKE</pre>
</div>
</div>
<div class="paragraph">
<p>Copie para a área de transferência a saída do comando acima, desde <code>ssh-rsa (&#8230;&#8203;)</code> até o final da linha. Agora, volte para a interface do OpenStack e acesse <em>Par de chaves</em> &gt; <em>Importar par de chaves</em>.</p>
</div>
<div id="img-openstack29" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack29.png" alt="openstack29">
</div>
<div class="title">Figure 25. Criando instâncias, parte 5</div>
</div>
<div class="paragraph">
<p>Escolha um nome sugestivo para o par de chaves, e cole o conteúdo da chave pública na caixa de texto na parte inferior da janela, como mostrado abaixo. Em seguida, clique em <em>Importar par de chaves</em>.</p>
</div>
<div id="img-openstack30" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack30.png" alt="openstack30">
</div>
<div class="title">Figure 26. Criando instâncias, parte 6</div>
</div>
<div class="paragraph">
<p>Finalizado esse processo, clique em <em>Disparar Instância</em>.</p>
</div>
<div id="img-openstack31" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack31.png" alt="openstack31">
</div>
<div class="title">Figure 27. Criando instâncias, finalizado</div>
</div>
<div class="paragraph">
<p>Após algum tempo, a instância será iniciada, como mostrado a seguir.</p>
</div>
<div id="img-openstack32" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack32.png" alt="openstack32">
</div>
<div class="title">Figure 28. Instância em operação</div>
</div>
<div class="paragraph">
<p>Note que a instância possui apenas um IP privado alocado (10.0.0.3 no exemplo), o que impossibilita que a acessemos de forma direta, ainda. Vamos resolver isso.</p>
</div>
</li>
<li>
<p>Para configurar a conectividade de rede, acesse <em>Projeto</em> &gt; <em>Rede</em> &gt; <em>IPs Flutuantes</em> &gt; <em>Alocar IP para Projeto</em>.</p>
<div id="img-openstack33" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack33.png" alt="openstack33">
</div>
<div class="title">Figure 29. Configuração de IPs flutuantes, parte 1</div>
</div>
<div class="paragraph">
<p>Escolha o <em>Pool</em> como <em>public</em>, e defina um nome qualquer para o IP flutuante. Em seguida, clique em <em>Alocar IP</em>.</p>
</div>
<div id="img-openstack34" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack34.png" alt="openstack34">
</div>
<div class="title">Figure 30. Configuração de IPs flutuantes, parte 2</div>
</div>
<div class="paragraph">
<p>O IP flutuante será criado (no exemplo abaixo, 172.24.4.109). Para alocá-lo à instância em execução, clique em <em>Associar</em>.</p>
</div>
<div id="img-openstack35" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack35.png" alt="openstack35">
</div>
<div class="title">Figure 31. Configuração de IPs flutuantes, parte 3</div>
</div>
<div class="paragraph">
<p>Selecione o endereço IP, e em seguida o nome da instância à qual o IP será associado (no caso, a instância criada no passo anterior desta atividade).</p>
</div>
<div id="img-openstack36" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack36.png" alt="openstack36">
</div>
<div class="title">Figure 32. Configuração de IPs flutuantes, parte 4</div>
</div>
<div class="paragraph">
<p>De volta à tela de instâncias, note que agora a instância possui dois endereços associados: o endereço privado, antigo, e o IP flutuante que acabamos de alocar a ela.</p>
</div>
<div id="img-openstack37" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack37.png" alt="openstack37">
</div>
<div class="title">Figure 33. Configuração de IPs flutuantes, concluído</div>
</div>
</li>
<li>
<p>Temos que configurar regras no firewall virtual que permitam o acesso à instância. Acesse <em>Projeto</em> &gt; <em>Rede</em> &gt; <em>Grupos de Segurança</em> &gt; <em>default</em> &gt; <em>Administrar regras</em>.</p>
<div id="img-openstack38" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack38.png" alt="openstack38">
</div>
<div class="title">Figure 34. Criando regras no firewall virtual, parte 1</div>
</div>
<div class="paragraph">
<p>Agora, clique em <em>Adicionar Regra</em>.</p>
</div>
<div id="img-openstack39" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack39.png" alt="openstack39">
</div>
<div class="title">Figure 35. Criando regras no firewall virtual, parte 2</div>
</div>
<div class="paragraph">
<p>Primeiro, vamos fazer uma regra que permita resposta a <code>ping</code>. Selecione a regra <em>Tudo ICMP</em>, crie uma descrição qualquer, indique a direção <em>Ingresso</em> e defina que o endereço remoto será dado no formato <em>CIDR</em>, igual a <code>0.0.0.0/0</code>.</p>
</div>
<div id="img-openstack40" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack40.png" alt="openstack40">
</div>
<div class="title">Figure 36. Criando regras no firewall virtual, parte 3</div>
</div>
<div class="paragraph">
<p>Crie uma segunda regra, permitindo <em>SSH</em>, com parâmetros iguais à anterior.</p>
</div>
<div id="img-openstack41" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack41.png" alt="openstack41">
</div>
<div class="title">Figure 37. Criando regras no firewall virtual, parte 4</div>
</div>
</li>
<li>
<p>Para visualizar a faixa de rede à qual as regras criadas acima se aplicam, acesse <em>Projeto</em> &gt; <em>Rede</em> &gt; <em>Redes</em> &gt; <em>public</em>. Note, no exemplo abaixo, que a faixa pública é a rede 172.24.4.0/24.</p>
<div id="img-openstack42" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack42.png" alt="openstack42">
</div>
<div class="title">Figure 38. Definindo o escopo da faixa pública</div>
</div>
<div class="paragraph">
<p>É possível ainda visualizar uma representação gráfica das redes e switches virtuais configurados no OpenStack na aba <em>Topologias de Rede</em>.</p>
</div>
<div id="img-openstack43" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack43.png" alt="openstack43">
</div>
<div class="title">Figure 39. Topologia de rede no OpenStack</div>
</div>
</li>
<li>
<p>Vamos adicionar uma rota estática no Windows para permitir o acesso à instância criada no OpenStack. Para isso, o primeiro passo é saber o IP da interface de rede externa do hypervisor, visível através da URL de acesso ao Horizon ou via linha de comando:</p>
<div class="literalblock">
<div class="content">
<pre>root@ostk-d1-g1:~# ip a s eno1 | grep ' *inet '
    inet 200.130.46.21/24 brd 200.130.46.255 scope global dynamic eno1</pre>
</div>
</div>
<div class="paragraph">
<p>Em sua máquina física, abra o <em>prompt</em> de comando como administrador.</p>
</div>
<div id="img-openstack45" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack45.png" alt="openstack45">
</div>
<div class="title">Figure 40. Prompt administrativo</div>
</div>
<div class="paragraph">
<p>Para adicionar uma rota estática, digite o comando <code>route ADD PUBLICNETWORK MASK 255.255.255.0 OPENSTACKIP</code>, substituindo os valores <code>PUBLICNETWORK</code> pela faixa da rede <code>public</code> no OpenStack, e <code>OPENSTACKIP</code> pelo endereço IP do hypervisor do OpenStack. Veja um exemplo:</p>
</div>
<div id="img-openstack46" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack46.png" alt="openstack46">
</div>
<div class="title">Figure 41. Adicionando rota estática</div>
</div>
</li>
<li>
<p>Feito isso, podemos acessar! Crie uma sessão SSH para o IP flutuante da instância Debian, usando o usuário <code>debian</code>:</p>
<div class="literalblock">
<div class="content">
<pre>adr-010@DESKTOP-3GP5RKE ~
$ ssh debian@172.24.4.109
The authenticity of host '172.24.4.109 (172.24.4.109)' can't be established.
ECDSA key fingerprint is SHA256:45IOyBVJxjFl6qkMkoNBSTY5JvuVkER+vFpUCg32B1k.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added '172.24.4.109' (ECDSA) to the list of known hosts.
Linux debian9-ostk-d1-g1 4.9.0-8-amd64 #1 SMP Debian 4.9.130-2 (2018-10-27) x86_64

The programs included with the Debian GNU/Linux system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.
debian@debian9-ostk-d1-g1:~$</pre>
</div>
</div>
<div class="paragraph">
<p>Perfeito! Determine com qual usuário você está operando:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>debian@debian9-ostk-d1-g1:~$ whoami
debian</pre>
</div>
</div>
<div class="paragraph">
<p>E o hostname da máquina que foi acessada:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>debian@debian9-ostk-d1-g1:~$ hostname
debian9-ostk-d1-g1</pre>
</div>
</div>
<div class="paragraph">
<p>Observe que apenas o IP privado é mostrado dentro das configurações de rede da VM. O mapeamento do IP flutuante é feito de forma externa, pela gestão de switches virtuais do OpenStack.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>debian@debian9-ostk-d1-g1:~$ ip a s
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1450 qdisc pfifo_fast state UP group default qlen 1000
    link/ether fa:16:3e:2c:0b:29 brd ff:ff:ff:ff:ff:ff
    inet 10.0.0.3/26 brd 10.0.0.63 scope global eth0
       valid_lft forever preferred_lft forever
    inet6 fdb3:49f6:c76e:0:f816:3eff:fe2c:b29/64 scope global mngtmpaddr dynamic
       valid_lft 86396sec preferred_lft 14396sec
    inet6 fe80::f816:3eff:fe2c:b29/64 scope link
       valid_lft forever preferred_lft forever</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_4_trabalhando_com_snapshots_no_openstack">4) Trabalhando com snapshots no OpenStack</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Vamos atribuir um "propósito" para nossa instância: um servidor web. Para instalar pacotes, precisamos primeiro configurar o DNS local da máquina, via arquivo <code>/etc/resolv.conf</code>. Execute o comando a seguir:</p>
<div class="literalblock">
<div class="content">
<pre>root@debian9-ostk-d1-g1:~# t=$( mktemp ) ; \
grep -v '^nameserver' /etc/resolv.conf &gt; t ; \
echo -e 'nameserver 8.8.8.8\nnameserver 8.8.4.4' &gt;&gt; t ; \
mv t /etc/resolv.conf ;  \
unset t</pre>
</div>
</div>
</li>
<li>
<p>Agora, atualize a lista de pacotes disponíveis no repositório remoto e instale o servidor web Nginx:</p>
<div class="literalblock">
<div class="content">
<pre>root@debian9-ostk-d1-g1:~# apt-get update &amp;&amp; apt-get install nginx -y</pre>
</div>
</div>
</li>
<li>
<p>Lembre-se que não criamos regras no firewall virtual para permitir acesso HTTP. Acesse <em>Projeto</em> &gt; <em>Rede</em> &gt; <em>Grupos de Segurança</em> &gt; <em>default</em> e crie uma nova regra para permitir acesso na porta TCP/80:</p>
<div id="img-openstack48" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack48.png" alt="openstack48">
</div>
<div class="title">Figure 42. Criação de regra HTTP</div>
</div>
</li>
<li>
<p>No navegador da sua máquina física, acesse o endereço IP flutuante da instância Debian&#8201;&#8212;&#8201;você deverá ver a página inicial do servidor web.</p>
<div id="img-openstack49" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack49.png" alt="openstack49">
</div>
<div class="title">Figure 43. Servidor web Nginx acessível na instância</div>
</div>
</li>
<li>
<p>Vamos criar um <em>snapshot</em> da instância e guardar seu estado atual. Em <em>Projeto</em> &gt; <em>Computação</em> &gt; <em>Instâncias</em>, clique em <em>Criar Snapshot</em>.</p>
<div id="img-openstack50" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack50.png" alt="openstack50">
</div>
<div class="title">Figure 44. Criação de snapshot, parte 1</div>
</div>
<div class="paragraph">
<p>Defina um nome apropriado para o <em>snapshot</em>.</p>
</div>
<div id="img-openstack51" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack51.png" alt="openstack51">
</div>
<div class="title">Figure 45. Criação de snapshot, parte 2</div>
</div>
<div class="paragraph">
<p>Diferentemente de outros sistemas de virtualização que trabalhamos até aqui, note que o <em>snapshot</em> da instância é armazenado como uma imagem em separado&#8201;&#8212;&#8201;não necessariamente associada à instância original. Acesse <em>Projeto</em> &gt; <em>Computação</em> &gt; <em>Imagens</em> para visualizá-lo.</p>
</div>
<div id="img-openstack52" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack52.png" alt="openstack52">
</div>
<div class="title">Figure 46. Criação de snapshot, concluído</div>
</div>
</li>
<li>
<p>Vamos promover uma alteração na instância para testar a funcionalidade de <em>snapshots</em>. Logado como <code>root</code> via SSH na instância, execute o comando abaixo para sobrescrever o arquivo <code>index.html</code> do servidor web:</p>
<div class="literalblock">
<div class="content">
<pre>root@debian9-ostk-d1-g1:~# echo "index.html post-snapshot" &gt; /var/www/html/index.nginx-debian.html</pre>
</div>
</div>
<div class="paragraph">
<p>Atualize a página web com o endereço IP flutuante da instância&#8201;&#8212;&#8201;note que o conteúdo da página foi alterado.</p>
</div>
<div id="img-openstack54" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack54.png" alt="openstack54">
</div>
<div class="title">Figure 47. Conteúdo da página web alterado</div>
</div>
</li>
<li>
<p>Vamos restaurar o <em>snapshot</em>. Em <em>Projeto</em> &gt; <em>Computação</em> &gt; <em>Imagens</em>, localize o nome do <em>snapshot</em> criado anteriormente e então clique em <em>Ativar</em>.</p>
<div id="img-openstack55" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack55.png" alt="openstack55">
</div>
<div class="title">Figure 48. Ativando snapshot, parte 1</div>
</div>
<div class="paragraph">
<p>Note que abre-se uma janela de criação de instância exatamente igual à que usamos ao criar a instância Debian original. De fato, no OpenStack <em>snapshots</em> são tratados como imagens quaisquer, sem ligação com a instância original. Defina um nome para a nova instância.</p>
</div>
<div id="img-openstack56" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack56.png" alt="openstack56">
</div>
<div class="title">Figure 49. Ativando snapshot, parte 2</div>
</div>
<div class="paragraph">
<p>Em <em>Flavor</em>, defina o tamanho da instância como <code>ds512M</code>, novamente. Clique em <em>Disparar Instância</em>. Após algum tempo, a instância será criada, como mostrado abaixo.</p>
</div>
<div id="img-openstack57" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack57.png" alt="openstack57">
</div>
<div class="title">Figure 50. Ativando snapshot, concluído</div>
</div>
</li>
<li>
<p>Em <em>Projeto</em> &gt; <em>Computação</em> &gt; <em>Instâncias</em>, localize a instância Debian original e selecione <em>Remover IP Flutuante</em>.</p>
<div id="img-openstack58" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack58.png" alt="openstack58">
</div>
<div class="title">Figure 51. Alternando IP flutuante para o snapshot, parte 1</div>
</div>
<div class="paragraph">
<p>Confirme a remoção do IP, e <strong>não</strong> marque a caixa <em>Release Floating IP</em>. Clique em <em>Desassociar</em>.</p>
</div>
<div id="img-openstack59" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack59.png" alt="openstack59">
</div>
<div class="title">Figure 52. Alternando IP flutuante para o snapshot, parte 2</div>
</div>
<div class="paragraph">
<p>De volta à tela anterior, localize a instância do <em>snapshot</em> recém-criado e selecione <em>Associar IP Flutuante</em>. Atribua à essa instância o IP flutuante que foi removido da instância Debian original.</p>
</div>
<div id="img-openstack60" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack60.png" alt="openstack60">
</div>
<div class="title">Figure 53. Alternando IP flutuante para o snapshot, parte 3</div>
</div>
</li>
<li>
<p>Atualize a página web em seu navegador. Você deverá ver a página inicial padrão do servidor web Nginx, inalterada.</p>
<div id="img-openstack61" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack61.png" alt="openstack61">
</div>
<div class="title">Figure 54. Acessando servidor web do snapshot</div>
</div>
</li>
<li>
<p>Para "emular" o comportamento de um <em>snapshot</em> em um sistema de virtualização tradicional, você pode navegar até <em>Projeto</em> &gt; <em>Computação</em> &gt; <em>Instâncias</em>, localizar a instância Debian original e clicar em <em>Excluir Instâncias</em>.</p>
<div id="img-openstack62" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack62.png" alt="openstack62">
</div>
<div class="title">Figure 55. Removendo instância original</div>
</div>
<div class="paragraph">
<p>Após a remoção, restará apenas o <em>snapshot</em>. De certa forma, é como se tivéssemos "restaurado" a instância para sua versão do <em>snapshot</em>.</p>
</div>
<div id="img-openstack63" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack63.png" alt="openstack63">
</div>
<div class="title">Figure 56. Apenas instância do snapshot restando no OpenStack</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_5_conhecendo_outras_funcionalidades_do_openstack">5) Conhecendo outras funcionalidades do OpenStack</h3>
<div class="paragraph">
<p>No menu <em>Admin</em> podemos configurar aspectos administrativos do OpenStack, como limites de recursos para usuários, imagens de instâncias disponíveis e <em>flavors</em>. Vamos explorar algumas dessas capacidades.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Em <em>Admin</em> &gt; <em>Computação</em> &gt; <em>Hipervisores</em> é possível visualizar todos os hypervisors sendo gerenciados pelo OpenStack, e adicionar novos se desejado. Como estamos usando um ambiente específico para desenvolvimento, não iremos adicionar novos hypervisors neste momento.</p>
<div class="paragraph">
<p>O tutorial disponível em <a href="https://docs.openstack.org/devstack/latest/guides/multinode-lab.html" class="bare">https://docs.openstack.org/devstack/latest/guides/multinode-lab.html</a> mostra um exemplo de configuração para um laboratório <em>multi-node</em> com o OpenStack.</p>
</div>
<div id="img-openstack64" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack64.png" alt="openstack64">
</div>
<div class="title">Figure 57. Lista de hypervisors disponíveis</div>
</div>
</li>
<li>
<p>A lista de <em>flavors</em> de instância disponibilizados para os usuários pode ser visualizada e customizadas através do menu <em>Admin</em> &gt; <em>Computação</em> &gt; <em>Sabores</em>.</p>
<div id="img-openstack65" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack65.png" alt="openstack65">
</div>
<div class="title">Figure 58. Lista de flavors de instância</div>
</div>
</li>
<li>
<p>As quotas de recursos disponibilizados aos usuários do OpenStack podem ser customizadas em <em>Admin</em> &gt; <em>Sistema</em> &gt; <em>Padrões</em>.</p>
<div id="img-openstack66" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack66.png" alt="openstack66">
</div>
<div class="title">Figure 59. Edição de quotas de recursos</div>
</div>
<div class="paragraph">
<p>Para realizar edições de quota com maior grau de granularidade (p.ex., quotas diferenciadas por usuários e grupos) é necessário interagir com os clientes de linha de comando do OpenStack, como abordado em <a href="https://docs.openstack.org/nova/latest/admin/quotas.html" class="bare">https://docs.openstack.org/nova/latest/admin/quotas.html</a> .</p>
</div>
</li>
<li>
<p>Podemos agrupar elementos do OpenStack em <em>Projetos</em>, <em>Grupos</em>, <em>Usuários</em> e <em>Papéis</em>. Os Projetos irão ditar quais conjuntos de recursos podem ser usados por um número de instâncias:</p>
<div id="img-openstack67" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack67.png" alt="openstack67">
</div>
<div class="title">Figure 60. Lista de projetos</div>
</div>
<div class="paragraph">
<p>Usuários, por sua vez, podem ser usados para garantir acesso ao OpenStack a diferentes pessoas, implementando uma <em>cloud</em> privada do tipo <em>IaaS</em> (<em>Infrastructure as a Service</em>).</p>
</div>
<div id="img-openstack68" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack68.png" alt="openstack68">
</div>
<div class="title">Figure 61. Lista de usuários</div>
</div>
<div class="paragraph">
<p>Grupos podem ser usados para reunir usuários com um mesmo perfil de uso, ou por departamentos:</p>
</div>
<div id="img-openstack69" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack69.png" alt="openstack69">
</div>
<div class="title">Figure 62. Lista de grupos</div>
</div>
<div class="paragraph">
<p>Finalmente, pode-se usar Papéis para atribuir diferentes níveis de permissão de acesso na interface do OpenStack a Grupos de usuários:</p>
</div>
<div id="img-openstack70" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack70.png" alt="openstack70">
</div>
<div class="title">Figure 63. Lista de papéis</div>
</div>
</li>
<li>
<p>O OpenStack é uma solução largamente utilizada por empresas ao redor do mundo para implementar soluções de <em>clouds</em> públicas, híbridas e privadas. Isso fica bastante claro ao visualizarmos suas capacidades de <em>accounting</em> e contabilização de horas de uso de CPU, memória e disco no menu <em>Admin</em> &gt; <em>Visão Geral</em>.</p>
<div id="img-openstack71" class="imageblock text-center">
<div class="content">
<img src="../img/9_OpenStack/openstack71.png" alt="openstack71">
</div>
<div class="title">Figure 64. Taxas de uso de recursos por projeto</div>
</div>
<div class="paragraph">
<p>Esse sistema de contabilização permite suporte ao modelo <em>pay-by-use</em>, muito popular em provedores de <em>clouds</em> públicas. Confira abaixo uma lista de fornecedores de <em>clouds</em> que utilizam o OpenStack como base para sua infraestrutura:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p><em>Clouds</em> públicas: <a href="https://www.openstack.org/marketplace/public-clouds/" class="bare">https://www.openstack.org/marketplace/public-clouds/</a></p>
</li>
<li>
<p><em>Clouds</em> privadas <em>hosted</em>: <a href="https://www.openstack.org/marketplace/hosted-private-clouds/" class="bare">https://www.openstack.org/marketplace/hosted-private-clouds/</a></p>
</li>
<li>
<p><em>Clouds</em> privadas gerenciadas remotamente: <a href="https://www.openstack.org/marketplace/remotely-managed-private-clouds/" class="bare">https://www.openstack.org/marketplace/remotely-managed-private-clouds/</a></p>
</li>
</ul>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-12-13 08:53:51 -0200
</div>
</div>
</body>
</html>