<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<title>Sessão 3: Introdução ao XCP-ng</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock pre.nowrap,.literalblock pre.nowrap pre,.listingblock pre.nowrap,.listingblock pre.nowrap pre{white-space:pre;word-wrap:normal}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #dddddf}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="_sessão_3_introdução_ao_xcp_ng">Sessão 3: Introdução ao XCP-ng</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_1_instalação_do_xcp_ng">1) Instalação do XCP-ng</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Crie uma mídia bootável com o instalador do XCP-ng, conforme instruções providas pelo instrutor. Em seguida, insira a mídia na máquina destacada como hypervisor para a dupla e execute o <em>boot</em> via USB. Você verá a tela a seguir:</p>
<div id="img-xcpng1" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng1.png" alt="xcpng1">
</div>
<div class="title">Figure 1. Tela inicial do XCP-ng</div>
</div>
</li>
<li>
<p>Inicie o <em>boot</em> do sistema. A primeira tela será para a configuração do mapa de teclado: selecione <code>br-abnt2</code>.</p>
<div id="img-xcpng2" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng2.png" alt="xcpng2">
</div>
<div class="title">Figure 2. Configuração de teclado</div>
</div>
</li>
<li>
<p>Prossiga a instalação selecionando <code>Ok</code>.</p>
<div id="img-xcpng3" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng3.png" alt="xcpng3">
</div>
<div class="title">Figure 3. Confirmação de instalação</div>
</div>
<div class="paragraph">
<p>Aceite os termos de uso em <code>Accept EULA</code>.</p>
</div>
<div id="img-xcpng4" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng4.png" alt="xcpng4">
</div>
<div class="title">Figure 4. Temos de uso</div>
</div>
</li>
<li>
<p>Selecione o disco de instalação do sistema, <code>sda</code>, que deve corresponder ao disco rígido da máquina local.</p>
<div id="img-xcpng5" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng5.png" alt="xcpng5">
</div>
<div class="title">Figure 5. Seleção de disco de instalação</div>
</div>
</li>
<li>
<p>Escolha a fonte de instalação dos pacotes, <code>Local media</code>.</p>
<div id="img-xcpng6" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng6.png" alt="xcpng6">
</div>
<div class="title">Figure 6. Seleção de fonte de pacotes</div>
</div>
<div class="paragraph">
<p>Não faça a verificação da mídia, é um processo bastante demorado.</p>
</div>
<div id="img-xcpng7" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng7.png" alt="xcpng7">
</div>
<div class="title">Figure 7. Verificação de mídia</div>
</div>
</li>
<li>
<p>Defina a senha do <code>root</code> como <code>Virt3sr</code>.</p>
<div id="img-xcpng8" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng8.png" alt="xcpng8">
</div>
<div class="title">Figure 8. Definir senha do root</div>
</div>
</li>
<li>
<p>O próximo passo é configurar a rede: mantenha a configuração em DHCP.</p>
<div id="img-xcpng9" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng9.png" alt="xcpng9">
</div>
<div class="title">Figure 9. Configuração de rede, parte 1</div>
</div>
<div class="paragraph">
<p>Depois, defina o nome de máquina como <code>xcp-ng-dX-gX</code>, substituindo <code>X</code> pelo dados apropriados para seu grupo. Mantenha a configuração DNS como automática.</p>
</div>
<div id="img-xcpng10" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng10.png" alt="xcpng10">
</div>
<div class="title">Figure 10. Configuração de rede, parte 2</div>
</div>
</li>
<li>
<p>Agora, escolha o <em>timezone</em> do sistema. Primeiro, selecione a área geográfica <code>America</code>&#8230;&#8203;</p>
<div id="img-xcpng11" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng11.png" alt="xcpng11">
</div>
<div class="title">Figure 11. Timezone e hora, parte 1</div>
</div>
<div class="paragraph">
<p>E em seguida a cidade apropriada, provavemente <code>Sao_Paulo</code> ou <code>Recife</code>.</p>
</div>
<div id="img-xcpng12" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng12.png" alt="xcpng12">
</div>
<div class="title">Figure 12. Timezone e hora, parte 2</div>
</div>
<div class="paragraph">
<p>Defina a configuração de tempo via NTP.</p>
</div>
<div id="img-xcpng13" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng13.png" alt="xcpng13">
</div>
<div class="title">Figure 13. Timezone e hora, parte 3</div>
</div>
<div class="paragraph">
<p>Para o servidor de consulta, defina manualmente o endereço <code>pool.ntp.br</code>.</p>
</div>
<div id="img-xcpng14" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng14.png" alt="xcpng14">
</div>
<div class="title">Figure 14. Timezone e hora, parte 4</div>
</div>
</li>
<li>
<p>Tudo pronto para a instalação: confirme em <code>Install XCP-ng</code>.</p>
<div id="img-xcpng15" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng15.png" alt="xcpng15">
</div>
<div class="title">Figure 15. Início da instalação</div>
</div>
<div class="paragraph">
<p>Observe o progresso:</p>
</div>
<div id="img-xcpng16" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng16.png" alt="xcpng16">
</div>
<div class="title">Figure 16. Instalação em progresso</div>
</div>
<div class="paragraph">
<p>Quando perguntado se deseja instalar <em>supplemental packs</em>, selecione <em>No</em>.</p>
</div>
<div id="img-xcpng17" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng17.png" alt="xcpng17">
</div>
<div class="title">Figure 17. Instalação de pacotes adicionais</div>
</div>
<div class="paragraph">
<p>Concluído o processo, selecione <em>Ok</em>, espere o sistema reiniciar e remova a mídia de instalação.</p>
</div>
<div id="img-xcpng18" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng18.png" alt="xcpng18">
</div>
<div class="title">Figure 18. Instalação concluída</div>
</div>
</li>
<li>
<p>Após o <em>boot</em> do sistema, você verá a tela de sumário do XCP-ng, como mostrado a seguir.</p>
<div id="img-xcpng19" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng19.png" alt="xcpng19">
</div>
<div class="title">Figure 19. Tela de sumário</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_2_conhecendo_alguns_comandos_básicos">2) Conhecendo alguns comandos básicos</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Você pode abrir uma conexão de linha de comando local, usando a opção <em>Local Command Shell</em>. Digite a senha de <code>root</code> para obter o acesso.</p>
<div id="img-xcpng20" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng20.png" alt="xcpng20">
</div>
<div class="title">Figure 20. Acesso à CLI local</div>
</div>
</li>
<li>
<p>O XCP-ng possui uma ferramenta de gerenciamento em linha de comando chamada <code>xe</code>. Esta ferramenta permite o controle do armazenamento de dados das máquinas virtuais, interfaces de redes associadas com as VMs, ente outros.</p>
<div class="paragraph">
<p>Veja o comando <code>xe host-list</code>, por exemplo:</p>
</div>
<div id="img-xcpng21" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng21.png" alt="xcpng21">
</div>
<div class="title">Figure 21. Listando hosts</div>
</div>
</li>
<li>
<p>Durante a instalação, o XCP-ng particiona automaticamente o disco do servidor utilizado. São reservados para o sistema apenas 4 GB. O restante do disco é alocado em um volume LVM, dentro do qual podem ser armazenados os dados das máquinas virtuais. Para visualizar as informações do LVM, utilize comando <code>pvdisplay</code> no <em>shell</em> do hypervisor:</p>
<div id="img-xcpng22" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng22.png" alt="xcpng22">
</div>
<div class="title">Figure 22. Visualizando volumes físicos</div>
</div>
</li>
<li>
<p>O XCP-ng gerencia estes volumes LVM através da noção de <em>Storage Repositories</em> (SR). Um <em>Storage Repository</em> corresponde a uma área no <em>storage</em> onde são armazenados os discos virtuais de uma máquina virtual, ou as imagens ISO utilizadas para instalação de novas máquinas virtuais. Para uma listagem dos <em>Storage Repositories</em> disponíveis, utilize o comando <code>sr-list</code>:</p>
<div id="img-xcpng23" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng23.png" alt="xcpng23">
</div>
<div class="title">Figure 23. Listando SRs</div>
</div>
<div class="paragraph">
<p>Note que um dos <em>Storage Repositories</em> disponíveis é do tipo LVM no host local, cujo UUID consta no nome do <em>Volume Group</em> listado anteriormente. Durante a instanciação de novas máquinas virtuais, os discos serão automaticamente instanciados dentro deste <em>Storage Repository</em>.</p>
</div>
</li>
<li>
<p>Por padrão, o XCP-ng cria para cada interface de rede física uma <em>bridge</em>. Nesta, podem ser associadas as interfaces de rede das máquinas virtuais, permitindo aos sistemas virtualizados acessarem a rede externa de forma transparente.</p>
<div class="paragraph">
<p>As redes disponíveis para as VMs podem ser listadas com o comando <code>network-list</code>:</p>
</div>
<div id="img-xcpng24" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng24.png" alt="xcpng24">
</div>
<div class="title">Figure 24. Listando redes</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_3_instalação_do_xcp_ng_center">3) Instalação do XCP-ng Center</h3>
<div class="paragraph">
<p>O XCP-ng Center é uma ferramenta capaz de gerenciar múltiplos servidores e máquinas virtuais.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Para iniciar a instalação do XCP-ng Center, execute o arquivo de instalação disponível em local indicado pelo instrutor. Você verá a tela a seguir:</p>
<div id="img-xcpng25" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng25.png" alt="xcpng25">
</div>
<div class="title">Figure 25. Instalação do XCP-ng Center, parte 1</div>
</div>
<div class="paragraph">
<p>O processo é bastante simples, bastando aceitar as opções padrão. Ao final do processo, clique em <em>Finish</em>.</p>
</div>
<div id="img-xcpng26" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng26.png" alt="xcpng26">
</div>
<div class="title">Figure 26. Instalação do XCP-ng Center, parte 2</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_4_conhecendo_o_xcp_ng_center">4) Conhecendo o XCP-ng Center</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Execute o XCP-ng Center. O primeiro passo é adicionar um servidor: clique em <em>Add New Server</em>.</p>
<div id="img-xcpng27" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng27.png" alt="xcpng27">
</div>
<div class="title">Figure 27. Adicionando novo servidor, parte 1</div>
</div>
<div class="paragraph">
<p>Na tela seguinte, adicione o IP do seu hypervisor&#8201;&#8212;&#8201;informe a conta do usuário <code>root</code> e senha configurada durante a instalação, <code>Virt3sr</code>.</p>
</div>
<div id="img-xcpng28" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng28.png" alt="xcpng28">
</div>
<div class="title">Figure 28. Adicionando novo servidor, parte 2</div>
</div>
<div class="paragraph">
<p>Confirme que deseja salvar as credenciais e restaurar a conexão ao reabrir o XCP-ng Center, e clique em <em>OK</em>.</p>
</div>
<div id="img-xcpng29" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng29.png" alt="xcpng29">
</div>
<div class="title">Figure 29. Adicionando novo servidor, parte 3</div>
</div>
<div class="paragraph">
<p>Quando perguntado se deseja cadastrar o servidor no serviço de <em>Health Check</em>, clique em <em>Close</em>.</p>
</div>
<div id="img-xcpng30" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng30.png" alt="xcpng30">
</div>
<div class="title">Figure 30. Adicionando novo servidor, parte 4</div>
</div>
</li>
<li>
<p>Uma vez adicionado o hypervisor, pode-se visualizar seu estado, performance e demais características diretamente a partir da ferramenta.</p>
<div id="img-xcpng31" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng31.png" alt="xcpng31">
</div>
<div class="title">Figure 31. Informações do hypervisor</div>
</div>
</li>
<li>
<p>Na aba <em>Console</em> há um terminal em modo texto para acesso ao hypervisor, de forma análoga ao que poderíamos fazer via console local, <code>ssh</code> ou PuTTY.</p>
<div id="img-xcpng32" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng32.png" alt="xcpng32">
</div>
<div class="title">Figure 32. Acesso console ao hypervisor</div>
</div>
</li>
<li>
<p>Informações sobre a utilização dos recursos do servidor podem ser obtidas na aba Performance. Note que, com a ausência de máquinas virtuais em execução, os recursos encontram-se subutilizados.</p>
<div id="img-xcpng33" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng33.png" alt="xcpng33">
</div>
<div class="title">Figure 33. Performance do hypervisor</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_5_configuração_do_repositório_compartilhado_de_isos">5) Configuração do repositório compartilhado de ISOs</h3>
<div class="paragraph">
<p>No XCP-ng Center, são suportados repositórios de ISOs, acessados via protocolos CIFS ou NFS. Desta forma, o XCP-ng Center exige a utilização de um servidor de arquivos para o gerenciamento das ISOs. Neste curso, iremos utilizar um servidor NFS pré-configurado, cujo endereço de acesso será disponibilizado pelo instrutor.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Para criar um repositório de imagens ISO no XCP-ng, clique no botão <em>New Storage</em> na barra de ferramentas superior; em <em>ISO Library</em>, selecione a opção <em>NFS ISO</em>.</p>
<div id="img-xcpng34" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng34.png" alt="xcpng34">
</div>
<div class="title">Figure 34. Adição de repositório ISO, parte 1</div>
</div>
</li>
<li>
<p>Escolha um nome para o repositório.</p>
<div id="img-xcpng35" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng35.png" alt="xcpng35">
</div>
<div class="title">Figure 35. Adição de repositório ISO, parte 2</div>
</div>
</li>
<li>
<p>Informe o caminho completo para o repositório NFS, e a versão do protocolo.</p>
<div id="img-xcpng36" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng36.png" alt="xcpng36">
</div>
<div class="title">Figure 36. Adição de repositório ISO, parte 3</div>
</div>
</li>
<li>
<p>Ao final do processo, acesse a aba <em>Storage</em> do repositório recém-adicionado para visualizar seu conteúdo, como mostrado a seguir.</p>
<div id="img-xcpng37" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng37.png" alt="xcpng37">
</div>
<div class="title">Figure 37. Adição de repositório ISO, parte 4</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_6_criação_de_máquinas_virtuais">6) Criação de máquinas virtuais</h3>
<div class="paragraph">
<p>O XCP-ng permite criar máquinas virtuais paravirtualizadas a partir de <em>templates</em> pré-configurados ou máquinas virtuais em virtualização completa sem a necessidade de um <em>template</em> pré-configurado. Um <em>template</em> descreve algumas configurações da máquina virtual a ser criada (modo de virtualização, tamanho mínimo de memória, disco, etc.). A instalação pode ser tanto a partir de uma mídia ou através da rede, para alguns sistemas.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Utilize a ferramenta de criação de máquinas virtuais pressionando o botão <em>New VM</em>. Selecione o template <em>Windows 10 (64-bit)</em>, como mostrado a seguir:</p>
<div id="img-xcpng38" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng38.png" alt="xcpng38">
</div>
<div class="title">Figure 38. Criação de VM nova, parte 1</div>
</div>
</li>
<li>
<p>Defina o nome da nova máquina virtual a ser criada, que contenha alguma identificação do grupo (p. ex., <code>win10-dX-gX</code>).</p>
<div id="img-xcpng39" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng39.png" alt="xcpng39">
</div>
<div class="title">Figure 39. Criação de VM nova, parte 2</div>
</div>
</li>
<li>
<p>Agora, selecione a imagem ISO de instalação do sistema disponível no repositório ISO adicionado anteriormente.</p>
<div id="img-xcpng40" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng40.png" alt="xcpng40">
</div>
<div class="title">Figure 40. Criação de VM nova, parte 3</div>
</div>
</li>
<li>
<p>Escolha o servidor-destino da VM, que será o único hypervisor disponível até aqui.</p>
<div id="img-xcpng41" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng41.png" alt="xcpng41">
</div>
<div class="title">Figure 41. Criação de VM nova, parte 4</div>
</div>
</li>
<li>
<p>Para o número de vCPUs, defina <code>2</code>, e escolha 4 GB de memória RAM total disponibilizada para a VM.</p>
<div id="img-xcpng42" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng42.png" alt="xcpng42">
</div>
<div class="title">Figure 42. Criação de VM nova, parte 5</div>
</div>
</li>
<li>
<p>Na escolha de GPUs dedicadas, simplemente clique em <em>Next</em> para passar ao próximo passo.</p>
<div id="img-xcpng43" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng43.png" alt="xcpng43">
</div>
<div class="title">Figure 43. Criação de VM nova, parte 6</div>
</div>
</li>
<li>
<p>Na configuração de <em>storage</em> da VM, cliqueno botão <em>Edit</em>.</p>
<div id="img-xcpng44" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng44.png" alt="xcpng44">
</div>
<div class="title">Figure 44. Criação de VM nova, parte 7</div>
</div>
<div class="paragraph">
<p>Aumente o tamanho do disco para 40 GB, como mostrado a seguir.</p>
</div>
<div id="img-xcpng45" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng45.png" alt="xcpng45">
</div>
<div class="title">Figure 45. Criação de VM nova, parte 8</div>
</div>
<div class="paragraph">
<p>Confirme que o tamanho do disco está corretamente especificado e clique em <em>Next</em>.</p>
</div>
<div id="img-xcpng46" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng46.png" alt="xcpng46">
</div>
<div class="title">Figure 46. Criação de VM nova, parte 9</div>
</div>
</li>
<li>
<p>Para a configuração de rede, aceite a opção-padrão do <em>wizard</em>.</p>
<div id="img-xcpng47" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng47.png" alt="xcpng47">
</div>
<div class="title">Figure 47. Criação de VM nova, parte 10</div>
</div>
</li>
<li>
<p>Na tela <em>Finish</em>, confira que todos os dados da VM estão de acordo com o desejado, e clique em <em>Create Now</em>.</p>
<div id="img-xcpng48" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng48.png" alt="xcpng48">
</div>
<div class="title">Figure 48. Criação de VM nova, parte 11</div>
</div>
</li>
<li>
<p>Após um curto período, a máquina virtual será criada. Acesse a aba <em>General</em> para visualizar suas características gerais.</p>
<div id="img-xcpng49" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng49.png" alt="xcpng49">
</div>
<div class="title">Figure 49. VM nova criada com sucesso</div>
</div>
</li>
<li>
<p>Acessando a aba <em>Console</em>, podemos visualizar a tela de instalação do Windows 10. Escolha idioma, teclado e clique em <em>Avançar</em>.</p>
<div id="img-xcpng50" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng50.png" alt="xcpng50">
</div>
<div class="title">Figure 50. Instalação do Windows 10, parte 1</div>
</div>
<div class="paragraph">
<p>Em seguida, clique em <em>Instalar agora</em>.</p>
</div>
<div id="img-xcpng51" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng51.png" alt="xcpng51">
</div>
<div class="title">Figure 51. Instalação do Windows 10, parte 2</div>
</div>
<div class="paragraph">
<p>Na tela de ativação do Windows, clique em <em>Não tenho a chave do produto</em> para prosseguir.</p>
</div>
<div id="img-xcpng52" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng52.png" alt="xcpng52">
</div>
<div class="title">Figure 52. Instalação do Windows 10, parte 3</div>
</div>
<div class="paragraph">
<p>Na escolha de versão do sistema, defina <em>Windows 10 Pro</em> e avance.</p>
</div>
<div id="img-xcpng53" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng53.png" alt="xcpng53">
</div>
<div class="title">Figure 53. Instalação do Windows 10, parte 4</div>
</div>
<div class="paragraph">
<p>Aceite os termos de licença do Windows, e prossiga.</p>
</div>
<div id="img-xcpng54" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng54.png" alt="xcpng54">
</div>
<div class="title">Figure 54. Instalação do Windows 10, parte 5</div>
</div>
<div class="paragraph">
<p>Em tipo de instalação, defina <em>Personalizada: Instalar apenas o Windows (avançado)</em>.</p>
</div>
<div id="img-xcpng55" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng55.png" alt="xcpng55">
</div>
<div class="title">Figure 55. Instalação do Windows 10, parte 6</div>
</div>
<div class="paragraph">
<p>Escolha o único disco disponível, e clique em avançar.</p>
</div>
<div id="img-xcpng56" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng56.png" alt="xcpng56">
</div>
<div class="title">Figure 56. Instalação do Windows 10, parte 7</div>
</div>
<div class="paragraph">
<p>O processo de instalação será iniciado, como mostrado a seguir.</p>
</div>
<div id="img-xcpng57" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng57.png" alt="xcpng57">
</div>
<div class="title">Figure 57. Instalação do Windows 10, progresso</div>
</div>
</li>
<li>
<p>Durante a instalação da máquina virtual, utilize a aba <em>Performance</em> para monitorar a utilização de recursos da máquina virtual.</p>
<div id="img-xcpng58" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng58.png" alt="xcpng58">
</div>
<div class="title">Figure 58. Monitoramento de performance de VM</div>
</div>
</li>
<li>
<p>Após a instalação e reinício da máquina (e algum tempo de espera), os passos de finalização da instalação irão começar. Na escolha de região, defina <em>Brasil</em> e prossiga.</p>
<div id="img-xcpng59" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng59.png" alt="xcpng59">
</div>
<div class="title">Figure 59. Finalizando a instalação do Windows 10, parte 1</div>
</div>
<div class="paragraph">
<p>Escolha o <em>layout</em> de teclado <em>Português (Brasil ABNT2)</em>.</p>
</div>
<div id="img-xcpng60" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng60.png" alt="xcpng60">
</div>
<div class="title">Figure 60. Finalizando a instalação do Windows 10, parte 2</div>
</div>
<div class="paragraph">
<p>Pule o passo para definição de um <em>layout</em> de teclado secundário.</p>
</div>
<div id="img-xcpng61" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng61.png" alt="xcpng61">
</div>
<div class="title">Figure 61. Finalizando a instalação do Windows 10, parte 3</div>
</div>
<div class="paragraph">
<p>Configure a VM para uso pessoal, como mostrado abaixo.</p>
</div>
<div id="img-xcpng62" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng62.png" alt="xcpng62">
</div>
<div class="title">Figure 62. Finalizando a instalação do Windows 10, parte 4</div>
</div>
<div class="paragraph">
<p>Quando da criação de conta, clique em <em>Conta offline</em> para criar um usuário local.</p>
</div>
<div id="img-xcpng63" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng63.png" alt="xcpng63">
</div>
<div class="title">Figure 63. Finalizando a instalação do Windows 10, parte 5</div>
</div>
<div class="paragraph">
<p>Na tela seguinte, confirme sua escolha clicando em <em>Não</em>.</p>
</div>
<div id="img-xcpng64" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng64.png" alt="xcpng64">
</div>
<div class="title">Figure 64. Finalizando a instalação do Windows 10, parte 6</div>
</div>
<div class="paragraph">
<p>Defina o nome do usuário local como <code>aluno</code>.</p>
</div>
<div id="img-xcpng65" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng65.png" alt="xcpng65">
</div>
<div class="title">Figure 65. Finalizando a instalação do Windows 10, parte 7</div>
</div>
<div class="paragraph">
<p>Em seguida, defina sua senha como <code>Virt3sr</code>.</p>
</div>
<div id="img-xcpng66" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng66.png" alt="xcpng66">
</div>
<div class="title">Figure 66. Finalizando a instalação do Windows 10, parte 8</div>
</div>
<div class="paragraph">
<p>Confirme-a:</p>
</div>
<div id="img-xcpng67" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng67.png" alt="xcpng67">
</div>
<div class="title">Figure 67. Finalizando a instalação do Windows 10, parte 9</div>
</div>
<div class="paragraph">
<p>Agora, surgirão três telas de definição de perguntas de segurança para a conta. Escolha quaisquer combinações de perguntas/respostas e prossiga.</p>
</div>
<div id="img-xcpng68" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng68.png" alt="xcpng68">
</div>
<div class="title">Figure 68. Finalizando a instalação do Windows 10, parte 10</div>
</div>
<div class="paragraph">
<p>Quando perguntado se deseja tornar a Cortana sua assistente pessoal, recuse.</p>
</div>
<div id="img-xcpng69" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng69.png" alt="xcpng69">
</div>
<div class="title">Figure 69. Finalizando a instalação do Windows 10, parte 11</div>
</div>
<div class="paragraph">
<p>Não aceite a configuração de histórico de atividades.</p>
</div>
<div id="img-xcpng70" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng70.png" alt="xcpng70">
</div>
<div class="title">Figure 70. Finalizando a instalação do Windows 10, parte 12</div>
</div>
<div class="paragraph">
<p>Finalmente, para as configurações de privacidade do sistema, desabilite todas as opções de clique em <em>Aceitar</em>.</p>
</div>
<div id="img-xcpng71" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng71.png" alt="xcpng71">
</div>
<div class="title">Figure 71. Finalizando a instalação do Windows 10, parte 13</div>
</div>
<div class="paragraph">
<p>Pronto! O Windows 10 está instalado e configurado.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_7_instalação_dos_adicionais_de_convidado">7) Instalação dos adicionais de convidado</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Para instalar os adicionais de convidado no XCP-ng Center, o primeiro passo é atualizar a máquina-alvo. Abra o <em>Windows Update</em> e inicie o processo de atualização.</p>
<div id="img-xcpng72" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng72.png" alt="xcpng72">
</div>
<div class="title">Figure 72. Atualização da VM, parte 1</div>
</div>
<div class="paragraph">
<p>Caso seja necessário reiniciar a máquina, aceite.</p>
</div>
<div id="img-xcpng73" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng73.png" alt="xcpng73">
</div>
<div class="title">Figure 73. Atualização da VM, parte 2</div>
</div>
<div class="paragraph">
<p>Ao final do processo (pode ser necessário invocar o processo de atualização múltiplas vezes), você deverá ver a mensagem <em>Você está atualizado</em>, como mostrado a seguir.</p>
</div>
<div id="img-xcpng74" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng74.png" alt="xcpng74">
</div>
<div class="title">Figure 74. Atualização da VM, parte 3</div>
</div>
</li>
<li>
<p>Como o XCP-ng é uma versão <em>open-source</em> do XenServer proprietário da Citrix, não há permissão para distribuir os binários de instalação dos adicionais de convidade diretamente, como documentado em <a href="https://github.com/xcp-ng/xcp/wiki/Guest-Tools" class="bare">https://github.com/xcp-ng/xcp/wiki/Guest-Tools</a> . Fizemos a extração da ISO de instalação dos <em>guest tools</em> a partir do CD de instalação da versão comercial do XenServer, disponibilizando-o no repositório de ISOs sob o nome <code>XenServer-guest-tools-VERSION.iso</code>.</p>
<div class="paragraph">
<p>Na console de acesso à VM, altere a imagem no drive de DVD virtual da máquina para a ISO de instalação dos <em>guest tools</em>, como mostrado a seguir:</p>
</div>
<div id="img-xcpng76" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng76.png" alt="xcpng76">
</div>
<div class="title">Figure 75. Instalação do Guest Tools, parte 1</div>
</div>
<div class="paragraph">
<p>Execute a instalação do pacote.</p>
</div>
<div id="img-xcpng77" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng77.png" alt="xcpng77">
</div>
<div class="title">Figure 76. Instalação do Guest Tools, parte 2</div>
</div>
<div class="paragraph">
<p>A máquina deverá ser reiniciada para instalação dos <em>PV Drivers</em> do XenServer, como visto abaixo.</p>
</div>
<div id="img-xcpng78" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng78.png" alt="xcpng78">
</div>
<div class="title">Figure 77. Instalação do Guest Tools, parte 3</div>
</div>
</li>
<li>
<p>Ao final do processo de instalação, abra o <em>Gerenciador de Dispositivos</em> da máquina virtual e confira, em <em>Controladores de armazenamento</em>, que o <em>driver</em> <em>XenServer PV Storage Host Adapter</em> está instalado.</p>
<div id="img-xcpng79" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng79.png" alt="xcpng79">
</div>
<div class="title">Figure 78. Instalação dos drivers de storage PV</div>
</div>
</li>
<li>
<p>De volta à console do XCP-ng Center, cheque que o estado de virtualização da VM mostra que o I/O está otimizado, e que o agente de gerenciamento está instalado.</p>
<div id="img-xcpng80" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng80.png" alt="xcpng80">
</div>
<div class="title">Figure 79. Guest Tools instalado com sucesso</div>
</div>
</li>
<li>
<p>Na aba <em>Performance</em>, confira que os dados reportados pela máquina virtual estão muito mais precisos, após a instalação do agente.</p>
<div id="img-xcpng81" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng81.png" alt="xcpng81">
</div>
<div class="title">Figure 80. Dados de performance após guest tools</div>
</div>
</li>
<li>
<p>Não se esqueça de ejetar a imagem ISO acessando a aba <em>Storage</em> &gt; <em>Eject</em>.</p>
<div id="img-xcpng82" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng82.png" alt="xcpng82">
</div>
<div class="title">Figure 81. Ejetando imagem ISO</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_8_acesso_ao_hypervisor_via_ssh">8) Acesso ao hypervisor via SSH</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Durante as atividades deste curso iremos ter que digitar alguns comandos no terminal das VMs, os quais serão mostrados nos cadernos de atividade de cada sessão. Alguns desses comandos serão bastante longos e/ou terão uma sintaxe complicada&#8201;&#8212;&#8201;nesse caso, o ideal é que tenhamos a possibilidade de copiá-los diretamente do caderno para a console, evitando erros de digitação.</p>
<div class="paragraph">
<p>O protocolo de login remoto SSH é ideal para solucionar essa tarefa. Em ambiente Windows, dois dos métodos mais populares para efetuar logins remotos via SSH são os programas PuTTY (<a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html" class="bare">https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html</a>) ou Cygwin (<a href="https://cygwin.com/install.html" class="bare">https://cygwin.com/install.html</a>). Vamos, primeiro, visualizar os passos necessários usando o PuTTY.</p>
</div>
<div class="paragraph">
<p>Em qualquer caso, o primeiro passo é sempre descobrir qual o endereço IP da máquina remota à qual queremos nos conectar. No caso do hypervisor XCP-ng, basta visualizar o endereço IP da máquina observando a página de sumário em seu host físico.</p>
</div>
<div class="paragraph">
<p>O uso do <strong>PuTTY</strong>, por se tratar de um programa <em>standalone</em> com o objetivo único de efetuar login via SSH, é mais simples. Faça o download do PuTTY em sua máquina física Windows, usando a URL informada acima. Em seguida, apenas abra o programa e digite na caixa <em>Host Name</em> o endereço IP da máquina remota descoberto acima. Em seguida, clique em <em>Open</em>.</p>
</div>
<div id="img-ssh1" class="imageblock text-center">
<div class="content">
<img src="../img/3_XCP-ng-s1/ssh1.png" alt="ssh1">
</div>
<div class="title">Figure 82. Login via SSH usando o PuTTY, parte 1</div>
</div>
<div class="paragraph">
<p>Será mostrado um alerta de segurança avisando que a chave do <em>host</em> remoto não se encontra na <em>cache</em> local, o que pode configurar um risco de segurança. Clique em <em>Yes</em> para prosseguir com a tentativa de login.</p>
</div>
<div class="paragraph">
<p>Em seguida, será solicitado o nome de usuário com o qual efetuar a conexão. Informe o usuário <code>root</code>, com senha <code>Virt3sr</code>. Em caso de sucesso, você verá a tela parecida com a que se segue:</p>
</div>
<div id="img-ssh2" class="imageblock text-center">
<div class="content">
<img src="../img/3_XCP-ng-s1/ssh2.png" alt="ssh2">
</div>
<div class="title">Figure 83. Login via SSH usando o PuTTY, parte 2</div>
</div>
<div class="paragraph">
<p>Para copiar/colar comandos no PuTTY, basta selecionar o texto desejado no ambiente da máquina física e digitar <code>CTRL + C</code>, e em seguida clicar com o botão direito na janela do PuTTY. O texto selecionado será colado na posição do cursor.</p>
</div>
</li>
<li>
<p>O uso do Cygwin é um pouco mais envolvido, já que seu objetivo é mais complexo: prover, em ambiente Windows, funcionalidade equivalente à que temos disponível em uma distribuição Linux. Para começar, faça o download e execute o instalador do Cygwin em sua máquina física Windows.</p>
<div class="paragraph">
<p>A instalação é, em grande parte, bastante similar à de qualquer aplicativo Windows. Na tela inicial, clique em <em>Next</em>. Em <em>Choose a Download Source</em>, mantenha marcada a caixa <em>Install from Internet</em> e clique em <em>Next</em>. Em <em>Select Root Install Directory</em>, os valores padrão estão apropriados&#8201;&#8212;&#8201;clique em <em>Next</em>. Na tela <em>Select Local Package Directory</em>, novamente, mantenha o valor padrão e clique em <em>Next</em>.</p>
</div>
<div class="paragraph">
<p>Agora, vamos selecionar a fonte de pacotes. Em <em>Select Your Internet Connection</em>, a menos que haja um <em>proxy</em> na rede local (informe-se com seu instrutor), mantenha marcada a caixa <em>Direct Connection</em> e clique em <em>Next</em>. Será feito o download da lista de espelhos disponíveis para o Cygwin. Em <em>Choose A Download Site</em>, qualquer espelho irá funcionar, mas evidentemente é desejável que escolhamos um que possua maior velocidade de download&#8201;&#8212;&#8201;o site <a href="http://linorg.usp.br" class="bare">http://linorg.usp.br</a> é provavelmente uma boa opção, nesse caso. Clique em <em>Next</em>, e o instalador irá baixar a lista de pacotes disponíveis.</p>
</div>
<div class="paragraph">
<p>Em adição ao sistema-base padrão, é necessário instalar o OpenSSH para efetuar logins remotos. Na caixa de busca <em>Search</em>, no topo da tela, digite o termo de busca <code>openssh</code>. Expanda a árvore <code>Net</code> e clique na palavra <em>Skip</em> na linha do pacote <code>openssh: The OpenSSH server and client programs</code>&#8201;&#8212;&#8201;ela irá alterar para a versão a ser instalada, <code>7.9p1-1</code> no caso da figura mostrada abaixo:</p>
</div>
<div id="img-ssh3" class="imageblock text-center">
<div class="content">
<img src="../img/3_XCP-ng-s1/ssh3.png" alt="ssh3">
</div>
<div class="title">Figure 84. Instalação do OpenSSH no Cygwin</div>
</div>
<div class="paragraph">
<p>Clique em <em>Next</em>. Em <em>Review and confirm changes</em>, verifique que o Cygwin irá instalar o OpenSSH e todas as demais dependências do sistema-base Linux, como o <em>shell</em> <code>bash</code> ou ferramentas como o <code>grep</code>, e clique em <em>Next</em>. O instalador irá fazer o download e instalação dos pacotes selecionados.</p>
</div>
<div class="paragraph">
<p>Concluído o processo, procure pelo programa <code>Cygwin Terminal</code> no menu iniciar da sua máquina física Windows, e execute-o. Agora, tente fazer login via SSH normalmente, como se estivesse em um <em>shell</em> Linux:</p>
</div>
<div id="img-ssh4" class="imageblock text-center">
<div class="content">
<img src="../img/3_XCP-ng-s1/ssh4.png" alt="ssh4">
</div>
<div class="title">Figure 85. Login via SSH usando o Cygwin</div>
</div>
<div class="paragraph">
<p>Para copiar/colar comandos no Cygwin, basta selecionar o texto desejado no ambiente da máquina física e digitar <code>CTRL + C</code>, e em seguida mudar o foco para a janela do Cygwin e digitar a combinação <code>SHIFT + Insert</code>. Para copiar texto a partir da janela do Cygwin, selecione-o e use a combinação de teclas <code>CTRL + Insert</code>. Para encontrar os arquivos localizados em sua máquina física, o diretório <code>/cygdrive/X</code> pode ser usado para mapear para os discos da máquina local&#8201;&#8212;&#8201;por exemplo, o diretório <code>/cygdrive/c</code> mapeia diretamente para o <code>C:\</code> da máquina Windows.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_9_armazenamento_de_dados_das_máquinas_virtuais">9) Armazenamento de dados das máquinas virtuais</h3>
<div class="paragraph">
<p>Quando novos discos virtuais são criados para as máquinas virtuais, é alocado espaço na partição LVM do hypervisor. Nesta etapa, será vista a relação entre os volumes virtuais gerenciados com o XCP-ng e a infraestrutura LVM. Utilize o comando <code>xe help</code> para praticar outros comando além dos exemplos abaixo.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Acesse o hypervisor via PuTTY ou Cygwin, como mencionado na atividade anterior. Utilize o comando <code>xe vm-disk-list</code> para listar os discos associados com uma VM específica (pode-se utilizar a tecla <code>TAB</code> para completar o nome da máquina virtual automaticamente).</p>
<div class="literalblock">
<div class="content">
<pre>[root@xcp-ng-d1-g1 ~]# xe vm-disk-list vm=win10-d1-g1
Disk 0 VBD:
uuid ( RO)             : 40f50b9b-dac8-ada1-09fa-79024a5dece0
    vm-name-label ( RO): win10-d1-g1
       userdevice ( RW): 0


Disk 0 VDI:
uuid ( RO)             : 7354b5b1-debe-4b0a-b03c-7d3707f72525
       name-label ( RW): win10-d1-g1 0
    sr-name-label ( RO): Local storage
     virtual-size ( RO): 42949672960</pre>
</div>
</div>
</li>
<li>
<p>Utilize o comando <code>lvdisplay</code> para exibir os volumes lógicos do LVM. Observe que, após a criação da nova máquina virtual, há um novo volume lógico cujo nome corresponde ao UUID do disco da VM e ao <em>Storage Repository</em> <em>Local Storage</em>.</p>
<div class="literalblock">
<div class="content">
<pre>[root@xcp-ng-d1-g1 ~]# lvdisplay /dev/VG_XenStorage-9f9f3987-d606-87c4-c543-7277d8f2848a/VHD-7354b5b1-debe-4b0a-b03c-7d3707f72525
  /run/lvm/lvmetad.socket: connect failed: No such file or directory
  WARNING: Failed to connect to lvmetad. Falling back to internal scanning.
  --- Logical volume ---
  LV Path                /dev/VG_XenStorage-9f9f3987-d606-87c4-c543-7277d8f2848a/VHD-7354b5b1-debe-4b0a-b03c-7d3707f72525
  LV Name                VHD-7354b5b1-debe-4b0a-b03c-7d3707f72525
  VG Name                VG_XenStorage-9f9f3987-d606-87c4-c543-7277d8f2848a
  LV UUID                6YpqDE-1TYW-0g71-coRz-CVeN-svZg-cxvV6O
  LV Write Access        read/write
  LV Creation host, time xcp-ng-d1-g1, 2018-11-28 10:29:41 -0200
  LV Status              available
  # open                 1
  LV Size                40.09 GiB
  Current LE             10262
  Segments               1
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     256
  Block device           253:1</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_10_snapshots_de_máquinas_virtuais">10) Snapshots de máquinas virtuais</h3>
<div class="paragraph">
<p>Um <em>snapshot</em> de uma máquina virtual é uma cópia do seu estado em um determinado momento. Estas cópias podem ser utilizadas para fins de backup, gerando diversas versões funcionais da máquina virtual e recuperando um estado anterior, quando necessário.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Para criar um <em>snapshot</em>, acesse a aba <em>Snapshots</em> da VM e clique no botão <em>Take Snapshot</em>.</p>
<div id="img-xcpng84" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng84.png" alt="xcpng84">
</div>
<div class="title">Figure 86. Criação de snapshots, parte 1</div>
</div>
<div class="paragraph">
<p>Defina o nome do <em>snapshot</em>, e se deseja guardar apenas o estado dos discos ou também da memória da VM.</p>
</div>
<div id="img-xcpng85" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng85.png" alt="xcpng85">
</div>
<div class="title">Figure 87. Criação de snapshots, parte 2</div>
</div>
</li>
<li>
<p>Concluído o <em>snapshot</em>, vamos testar sua funcionalidade. Abra a console da VM e crie um arquivo texto no Desktop do usuário <code>aluno</code>, com qualquer conteúdo.</p>
<div id="img-xcpng86" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng86.png" alt="xcpng86">
</div>
<div class="title">Figure 88. Alteração do estado da VM</div>
</div>
</li>
<li>
<p>Com a função <em>Revert To</em>, é possível retornar para algum dos estados previamente salvos. Em <em>Actions</em>, é possível utilizar um <em>snapshot</em> para criar novas máquinas virtuais. Um <em>snapshot</em> também pode ser convertido em um arquivo de backup ou <em>template</em>: como arquivo de backup, ele pode ser posteriormente restaurado em caso de perda dos dados no <em>storage</em>; já como <em>template</em>, uma nova máquina virtual pode ser gerada a partir do <em>snapshot</em>.</p>
<div class="paragraph">
<p>Selecione o <em>snapshot</em> criado no passo (1) e clique em <em>Revert To</em>:</p>
</div>
<div id="img-xcpng87" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng87.png" alt="xcpng87">
</div>
<div class="title">Figure 89. Revertendo estado da VM, parte 1</div>
</div>
<div class="paragraph">
<p>Confirme a reversão do estado da VM.</p>
</div>
<div id="img-xcpng88" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng88.png" alt="xcpng88">
</div>
<div class="title">Figure 90. Revertendo estado da VM, parte 2</div>
</div>
<div class="paragraph">
<p>Após a reversão do estado, note que o <em>snapshot</em> continua existindo e podendo ser usado posteriormente.</p>
</div>
<div id="img-xcpng89" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng89.png" alt="xcpng89">
</div>
<div class="title">Figure 91. Revertendo estado da VM, parte 3</div>
</div>
</li>
<li>
<p>Retorne à console da VM&#8201;&#8212;&#8201;note que o arquivo texto que havíamos criado sumiu!</p>
<div id="img-xcpng90" class="imageblock text-center png">
<div class="content">
<img src="../img/3_XCP-ng-s1/xcpng90.png" alt="xcpng90">
</div>
<div class="title">Figure 92. Estado da VM revertido com sucesso</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-12-10 15:00:53 -0200
</div>
</div>
</body>
</html>